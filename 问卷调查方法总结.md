# 迁移到微服务架构的过程，动机和问题：实证研究

为了引出这些动机，我们以调查的形式进行了一项实证研究，采访了至少两年前采用基于微服务的建筑风格的21名从业者。

关于我们的受访者的概况，他们在几个方面有所不同：

- 他们公司的角色：31.82％的参与者是软件架构师，27.27％的项目经理，22.73％的高级开发人员，9.09％的敏捷教练和9.09％的公司首席执行官（CEO）。所有受访者都拥有至少五年的软件开发经验，包括CEO。

- 组织领域：28.57％的受访者为银行工作，28.57％为仅生产和销售自己的软件即服务的公司（例如，网站建设者，移动应用程序生成器等），23.81％的咨询公司专门从事移民工作微服务，公共管理部门IT部门9.52％，电信公司9.52％。

- 迁移类型：为了解决迁移到微服务的最常见的利弊，我们考虑了已完成和正在进行的迁移，还考虑了支持多次迁移的软件顾问的经验以及已经拥有的单个公司的经验已迁移或仍在迁移过程中。

由于找到参与者在迁移到基于微服务的架构风格方面经验丰富的复杂性，我们没有提前计划受访者的样本。但是，为了避免浪费练习者和访谈员的时间，在面试开始之前，我们询问参与者是否至少有两年的迁移经验。因此，我们跳过了只有两个月经验的十名参与者; 没有其他人报告不到两年的经验。




## 调查问卷和调查
我们的调查目标是分析从单片架构到基于微服务的架构迁移的动机以及优缺点。我们根据收集的信息构建问题：

- 公司和个人信息。

- 受访者的角色：我们想对受访者的角色进行分类。

- 公司信息：我们旨在识别公司域名。

- 公司在软件方面的角色：我们的目的是了解公司是否为其他公司生产软件，出于内部目的，或者他们是否为顾问。

- 动机。我们的目的是了解迁移的原因。

- 迁移的应用程序数量

- 开发的微服务的数量

- 迁移过程。我们的目的是描述有经验的从业者采用的迁移过程，以了解与特定过程相关的实际利益和问题。

- 成本。我们的目的是了解迁移的成本开销

我们通过封闭式答案问题和开放式问题收集信息，以便参与者就迁移过程提供意见。调查问卷最重要的目标之一是评估移民动机的重要性。因此，我们要求参与者根据五点李克特量表对他们的动机进行排名，其中0表示“完全不相关”，4表示“基本”。此外，我们解释说，量表的价值唯一的目的是对动机进行排名。例如，维护值为5，关注点分离值为3表示维护被认为比关注点分离更重要，但单个值5和3本身没有任何意义。




# 迁移到微服务架构：工业调查

在本研究中，我们对从业者进行了深入调查，以揭示针对MSA的迁移实践。为此目的，我们研究（i）活动和（ii）工业从业者在向MSA迁移时所面临的挑战。研究方法我们使用依赖于两个主要阶段。在第一阶段，我们设计了一个面试指南，用于对工业从业者进行5次探索性访谈。在第二阶段，我们使用访谈指南和访谈结果来设计在线调查问卷，我们在我们的从业者网络中分发。总共有16位不同IT公司和不同专业阶段的18名从业者参加了我们的研究。我们的参与者提供的高质量数据使这成为一个相当令人兴奋的第一项研究，在MSA迁移实践的状态，因此有希望激发未来研究的思路。

本文的主要贡献如下：

- 对18名从业人员的调查，提供有关MSA迁移的定量信息;

- 对收集的数据进行分析，讨论从业者对迁移活动的看法以及以下三个阶段中每个阶段的挑战：（i）现有系统的体系结构恢​​复，（ii）从预先存在到新体系结构的体系结构转换， （iii）新系统的实施;

- 根据从业者活动和可能相关的研究方向讨论获得的结果;

- 研究复制包1，以在线调查问卷的原始数据为特色。



# 现实中的微服务架构：工业探究

#### 研究方法
这项研究始于2018年下半年，然后使用常见的定性研究方法 - 访谈[11]进行了四个月。三名学生研究人员及其两名主管参与设计访谈工具，通过访问从业人员收集数据，并分析数据进行报告。

## A.研究问题
为了描述与MSA迁移和采用相关的实践和挑战，我们定义了以下两个研究问题（RQ）：

- 愿景与微服务的现实之间有什么差距？该RQ旨在根据所声称的微服务的特定特征来研究实际实践。

- 在实践中实施微服务有哪些好处和费用？该RQ旨在确定微观服务在理论上的积极影响与工业实践中的感知痛苦之间可能存在的差距，这可能进一步推动未来的研究方向。

我们采用了社区中最着名的愿景，这是Fowler和Lewis在2014年提出的[2]，作为本研究中研究的微服务特征的参考。

## B.研究程序
本研究旨在深入了解MSA在软件行业的实践状况，特别关注探索共同愿景与微服务实际实践之间的差距。因此，我们使用半结构化访谈收集了具有MSA经验的从业者的数据，这是收集定性数据的常用研究方法[12]。访谈是通过访调员和受访者之间的高度讨论进行的，其中包含开放式和特定问题的混合，使研究人员能够在不同的访谈中获得可预见和意外的数据。

这种基于访谈的调查程序如图1所示。在最初阶段，三位学生研究人员进行了头脑风暴，共同确定了MSA的利益，并与他们的主管进行了计划会议，以确定面试的计划。然后他们根据会议获得的兴趣设计了访谈工具，并受到Fowler和Lewis [9]以及之前其他MSA相关调查研究[9]，[10]，[13]的九项特征主张的启发。。同时，研究人员开始邀请合适的从业者参加面试。我们在与中国软件架构相关的三个有影响力的行业论坛中对经验丰富的从业者进行了搜索。然后，我们邀请了在软件架构领域工作超过两年的选定从业者，并且还拥有MSA作为我们的受访者候选人的经验。最后，来自十三家公司的从业者接受了我们的邀请。为了评估和改进访谈工具，在与受邀受访者进行面谈之前，我们严格执行了与合作伙伴精心挑选的领域专家的两次试点访谈。根据两次试点访谈的有用反馈，这些文书经历了八次修订。

## C.数据收集
我们的半结构化访谈工具的设计参考了Kvale的指南[11]，并由两位具有丰富的访谈研究经验的主管进行了审核。在与两位领域专家进行试点访谈期间，结构得到了改进，一些问题得到了澄清。我们的面试工具的最终版本分为三个部分：

- 热身：有关从业者及其公司的基本信息;

- MSA的实践：关于Fowler和Lewis声称的微服务特征的关注和实践[2] ;

- 收益和痛苦：微服务的好处和痛苦，以及需要进一步研究的微服务。

半结构化访谈中的一些问题旨在直截了当，封闭式，例如基本信息的问题。虽然其他人是开放式的，以便在不同情况下引导面试，这意味着某些问题的顺序或细节不会以某种方式固定，具体取决于受访者的经验和答案。

这次访谈主要是通过与中国五个城市的参与者网站面对面进行的。由于地理限制，仅在线进行了一次访谈。我们花了大约2个月时间进行了所有13次采访。每次访谈都有一位受访者和两三位研究员作为访调员。在面试过程中，一位研究人员负责用文书指南提问，而另一位研究员则记录并提出补充问题以确保涵盖利益。所有采访总共花了15个小时，平均每次采访69分钟。同时，在丢失一些重要信息的情况下，所有访谈都是在获得受访者的权限后使用数字录音机录制的。

## D.数据分析
对受访者收集的数据进行处理和分析，以生成本研究的主要结果。采访记录的转录首先由一名学生研究人员在语音识别应用程序的帮助下完成，然后由另外两名学生研究人员进行检查。包含257648个单词的15个小时访谈的成绩单在访谈期间按照编码手册编写了注释令牌[14]。为避免引入研究者的偏见，每个访谈记录的编码由三名学生研究人员独立完成。通过与其主管的定期会议讨论并解决了任何分歧。

正如[15]中所建议的，本研究中的数据分析将手动和计算机辅助方法与定性数据分析软件包NVivo相结合，该软件包能够帮助研究人员有效地从大量文本数据中探索模式。并提高分析过程的严谨性。然而，由于NVivo在主题思想生成方面不太有用，我们应用了主题分析[16]，手动分析了MSA不同阶段的关注点和实践。



#  Microservices in Industry: Insights into Technologies, Characteristics, and Software Quality

作为顶级指导，我们遵循Runeson和Höst [9]所描述的五步案例研究过程。

#### Study Design
我们的总体研究目标是提供有关微服务行业采用和实施的见解以及该领域的基本原理。该目标由以下三个研究问题构成：

公司使用哪些技术来实现和运行微服务以及基本原理？

公司尊重微服务的哪些特征，他们忽视了哪些特征，以及出于哪些原因？

公司如何看待微服务架构对软件质量的影响？

定性方法似乎适合回答这些问题，因为它们分析概念之间的关系并直接处理现有的复杂性[10]。由于定性结果非常丰富且信息丰富，因此它们使我们能够专注于参与者的理由。作为一种具体方法，我们选择半结构化访谈[10]，[11]，因为它们提供了基本议程，但也允许基于响应进行动态调整。作为访谈参与者，我们希望软件专业人员具有丰富的专业经验和扎实的服务导向知识。最近还需要参与开发基于服务的系统（最好是微服务）。通过研究组内的个人行业联系实现了参与者的招募。我们联系了来自不同领域和不同规模的公司。

#### 准备数据收集
在进行面试之前准备了几份文件。我们创建了一个采访序言 [9]，概述了访谈过程和主题。该文件事先已发送给参与者，以使他们熟悉该研究。它还涉及道德方面的考虑，如保密，要求同意创建录音，并传达该音频以及不会发布成绩单。为了确定范围和组织半结构化访谈，我们创建了一个访谈指南 [10]，其中包含按主题块分组的最重要问题。本指南被用作访谈的松散结构，不与参与者分享。最后，我们创建了一个案例表征矩阵 [10] 最重要的参与者属性和研究概念。

#### 证据收集
在17次个人访谈中，6次面对面进行，11次通过远程通信软件进行屏幕共享。除了一次英语采访外，其他所有采访都是用德语进行的。持续时间在45到75分钟之间。每个参与者都同意创建录音。在访谈期间，我们根据参与者的反应松散地遵循了访谈指南。我们手动将每个录音转录为文本文档。然后将这些成绩单发送给参与者进行审查和最终批准，他们可以删除敏感信息或更改不明确或不需要的含义的句子。然后将最终的转录本用于我们的详细定性分析。

#### 数据分析
第一步是对每个病例​​转录本进行详细分析。我们在很大程度上依赖于创建的案例表征矩阵以及制表[9]。每个研究问题的重要部分都从成绩单中提取并记录下来。根据调查结果，我们使用其他属性调整矩阵。在第二步中，我们使用跨案例分析[10]来确定重要的概括和总结。我们记录了共同的趋势和偏差，然后将其汇总到每个研究问题的发现和外卖中。我们的在线存储库中提供了采访工件和结果。1
